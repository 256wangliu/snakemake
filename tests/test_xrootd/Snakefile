import os
from snakemake.remote.XROOTD import RemoteProvider as XROOTDRemoteProvider

XROOTD = XROOTDRemoteProvider(url='eoslhcb.cern.ch', use_remote=True)

rule all:
    input: XROOTD.remote("eos/lhcb/user/c/cburr/test_eos_recreate_2.root")

rule split:
    input: XROOTD.remote("eos/lhcb/user/c/cburr/test_eos_update.root")
    output: XROOTD.remote("eos/lhcb/user/c/cburr/test_eos_recreate_2.root")
    shell:
        'xrdcp root://eoslhcb.cern.ch//{input[0]} root://eoslhcb.cern.ch//{output[0]}'

# TODO try removing leading slash on /eos/...
# TODO try keep local True and False
# TODO Set default of use_remote as a provider property
